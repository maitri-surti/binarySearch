var _0x3648=["payload","round","fieldRow","push","workspaceToDom","COMP_","SHOW_HINT","showOriginal","SHOW_TIMEOUT_DIALOG","type","getParent","bridge","RULES","inputList","string","undefined","done","SHOW_OBJECTIVE","#arena","contest","workspaceBlocks","getTheme","#countdownUi","#backButton","#confirmModal","dequeue","CLOSE_PLAYGROUND_WINDOW","HINT","GO_BACK_TO_PLAYGROUND","next","iterator","isArray","shift","from","HIDE_TIMEOUT_DIALOG","log","#0091FF","number","length","domToWorkspace","points","text","totalScore","Scrollbar","enqueue","autoClose","concat","#timeoutModal","|SEPRATOR|","peek","#playground","data","slice","getElementById","OPEN_PLAYGROUND_WINDOW","HSV_VALUE","firstElementChild","SHOW_RULES","defineTheme","#playgroundWindowOpen","toolbox","SHOW_CONFIRM_DIALOG","scrollbarThickness","#fff","paygroundWorkspace","find","start","LoopTrap","ready",".btnHint","INIT","toISOString","workspaceToCode","RUN_CODE","value","getValue","JavaScript","symbol","Help","test","INFINITE_LOOP_TRAP","name","stop","error","init","previewScaleFactor","ANALYTICS","constructor","Theme","ContextMenu","SUBMIT","#countdownTimerUi","countdown","getAllBlocks","appendDomToWorkspace","highlightBlock","code","dark-ui","function","DONE","show","arenaWorkspace","inject","GO_BACK","#loader","filter","bold","HIDE_CONFIRM_DIALOG","object","#modal","isDeletable","hide","domToText","SAVE","Object","practice","dispatch","end","#playgroundWindow","Xml","geras","SUGGESTION_PROVIDED","return","GO_BACK_TO_CODE","clear","prototype","#464866","Map","#playgroundWindowClose","isEmpty","#closeArenaButton","count","forEach",".btnRules","competition","Exo, Roboto, Georgia, serif","addReservedWords"];!function(e){!function(x){for(;--x;)e.push(e.shift())}(152)}(_0x3648);var _0x15d7=function(x,e){return _0x3648[x-=0]};function _createForOfIteratorHelper(x,e){var o;if("undefined"==typeof Symbol||null==x[Symbol[_0x15d7("0x10")]]){if(Array.isArray(x)||(o=_unsupportedIterableToArray(x))||e&&x&&typeof x.length===_0x15d7("0x17")){o&&(x=o);function n(){}var t=0;return{s:n,n:function(){return t>=x[_0x15d7("0x18")]?{done:!0}:{done:!1,value:x[t++]}},e:function(x){throw x},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,r=!0,c=!1;return{s:function(){o=x[Symbol[_0x15d7("0x10")]]()},n:function(){var x=o[_0x15d7("0xf")]();return r=x.done,x},e:function(x){c=!0,d=x},f:function(){try{r||null==o.return||o[_0x15d7("0x6c")]()}finally{if(c)throw d}}}}function _unsupportedIterableToArray(x,e){if(x){if(typeof x===_0x15d7("0x0"))return _arrayLikeToArray(x,e);var o=Object[_0x15d7("0x6f")].toString.call(x)[_0x15d7("0x26")](8,-1);return o===_0x15d7("0x64")&&x[_0x15d7("0x49")]&&(o=x[_0x15d7("0x49")][_0x15d7("0x43")]),o===_0x15d7("0x71")||"Set"===o?Array[_0x15d7("0x13")](x):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[_0x15d7("0x41")](o)?_arrayLikeToArray(x,e):void 0}}function _arrayLikeToArray(x,e){(null==e||e>x[_0x15d7("0x18")])&&(e=x.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=x[o];return n}function _typeof(x){return(_typeof="function"==typeof Symbol&&typeof Symbol[_0x15d7("0x10")]===_0x15d7("0x3f")?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x[_0x15d7("0x49")]===Symbol&&x!==Symbol[_0x15d7("0x6f")]?_0x15d7("0x3f"):typeof x})(x)}var competitionPractice=!1,lockSuggection=!1,defaultZoom;function timeover(){openTimeoutModal()}function Queue(){this[_0x15d7("0x25")]=new Array,this[_0x15d7("0x1e")]=function(x){this.data[_0x15d7("0x7e")](x)},this[_0x15d7("0xb")]=function(){return this.data[_0x15d7("0x12")]()},this.peek=function(){return this[_0x15d7("0x25")][0]},this[_0x15d7("0x73")]=function(){return 0===this[_0x15d7("0x25")][_0x15d7("0x18")]},this[_0x15d7("0x6e")]=function(){this.data.splice(0,this[_0x15d7("0x25")][_0x15d7("0x18")])}}Bridge[_0x15d7("0x46")](function(x){if(x)switch(x.type){case WebActionType[_0x15d7("0x38")]:if(changePracticeMode(!1),x[_0x15d7("0x7b")])try{var e;window[_0x15d7("0x4e")]&&window.countdown[_0x15d7("0x44")](),window.countdown=new Countdown(_0x15d7("0x4d"),(new Date)[_0x15d7("0x39")](),x[_0x15d7("0x7b")][_0x15d7("0x67")],timeover),window[_0x15d7("0x4e")][_0x15d7("0x34")](),x[_0x15d7("0x7b")][_0x15d7("0x5")]&&x.payload.contest[_0x15d7("0x25")]&&(e=Blockly[_0x15d7("0x69")].textToDom(x[_0x15d7("0x7b")][_0x15d7("0x5")][_0x15d7("0x25")]),workspace.clear(),Blockly[_0x15d7("0x69")][_0x15d7("0x19")](e,workspace))}catch(x){console.log(x)}break;case WebActionType.PRACTICE:if(changePracticeMode(!0),x.payload)try{window[_0x15d7("0x4e")]&&window[_0x15d7("0x4e")][_0x15d7("0x44")](),x.payload[_0x15d7("0x65")]&&x[_0x15d7("0x7b")][_0x15d7("0x65")][_0x15d7("0x25")]&&(e=Blockly.Xml.textToDom(x[_0x15d7("0x7b")][_0x15d7("0x65")][_0x15d7("0x25")]),workspace[_0x15d7("0x6e")](),Blockly[_0x15d7("0x69")][_0x15d7("0x19")](e,workspace))}catch(x){console[_0x15d7("0x15")](x)}}}),hideTimeoutModal(),hideConfirmModal(),changePracticeMode(competitionPractice),Blockly.HSV_SATURATION=.7,Blockly[_0x15d7("0x29")]=.7,Blockly.Flyout[_0x15d7("0x6f")][_0x15d7("0x1f")]=!1,Blockly[_0x15d7("0x1d")][_0x15d7("0x30")]=12,Blockly[_0x15d7("0x47")]=typeof Blockly[_0x15d7("0x47")]===_0x15d7("0x17")?Blockly[_0x15d7("0x47")]:.7,Blockly[_0x15d7("0x4b")].showOriginal=Blockly[_0x15d7("0x4b")].show,Blockly[_0x15d7("0x4b")][_0x15d7("0x56")]=function(x,e,o){if(Array[_0x15d7("0x11")](e)){if(1===e[_0x15d7("0x18")]&&e[_0x15d7("0x33")](function(x){return x[_0x15d7("0x1b")]===_0x15d7("0x40")}))return;var n=e.filter(function(x){return"Help"!==x.text});return Blockly[_0x15d7("0x4b")].showOriginal(x,n,o)}Blockly.ContextMenu[_0x15d7("0x82")](x,e,o)},typeof defaultZoom===_0x15d7("0x1")&&(defaultZoom={});var animationTimeouts=[],separator=_0x15d7("0x22"),workspaceReadOnly=void 0,blocksExecutionQueue=new Queue,workspace=Blockly[_0x15d7("0x58")](_0x15d7("0x32"),{media:mediaPath,toolbox:document[_0x15d7("0x27")](_0x15d7("0x2e")),theme:Blockly[_0x15d7("0x4a")][_0x15d7("0x2c")](_0x15d7("0x53"),{base:Blockly.Themes.Classic,startHats:!1,componentStyles:{workspaceBackgroundColour:"#25274D",toolboxBackgroundColour:"#464866",toolboxForegroundColour:_0x15d7("0x31"),flyoutBackgroundColour:_0x15d7("0x70"),flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:_0x15d7("0x31"),insertionMarkerColour:_0x15d7("0x31"),insertionMarkerOpacity:.3,scrollbarOpacity:.1,cursorColour:_0x15d7("0x16")},fontStyle:{family:_0x15d7("0x79"),weight:_0x15d7("0x5c"),size:9}}),renderer:_0x15d7("0x6a"),trashcan:!1,oneBasedIndex:!0,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:defaultZoom}),blocks=document[_0x15d7("0x27")](_0x15d7("0x6"));function workspaceToCode(){window[_0x15d7("0x35")]=1e3,Blockly[_0x15d7("0x3e")][_0x15d7("0x42")]='if (--window.LoopTrap == 0) throw "Infinite loop.";\n',Blockly[_0x15d7("0x3e")].addReservedWords(_0x15d7("0x51")),Blockly.JavaScript[_0x15d7("0x7a")](_0x15d7("0x52"));var x=Blockly[_0x15d7("0x3e")][_0x15d7("0x3a")](workspace);return Blockly[_0x15d7("0x3e")][_0x15d7("0x42")]=null,x}function executeWorkspaceCode(){try{(0,eval)(workspaceToCode())}catch(x){console[_0x15d7("0x45")](x)}}function goBack(){sendAnalytics(_0x15d7("0x59"));var x=Blockly.Xml.workspaceToDom(workspace),e=Blockly[_0x15d7("0x69")][_0x15d7("0x62")](x);window[_0x15d7("0x86")][_0x15d7("0x66")](NativeActionType.BACK,e)}function showHint(){sendAnalytics(_0x15d7("0x81")),window[_0x15d7("0x86")][_0x15d7("0x66")](NativeActionType[_0x15d7("0xd")])}function showTask(){sendAnalytics(_0x15d7("0x3")),window[_0x15d7("0x86")][_0x15d7("0x66")](NativeActionType.OBJECTIVE)}function showRules(){sendAnalytics(_0x15d7("0x2b")),window.bridge.dispatch(NativeActionType[_0x15d7("0x87")])}function suggestion(x){!0!==lockSuggection&&!0===competitionPractice&&typeof x===_0x15d7("0x0")&&(x[_0x15d7("0x18")]<1||(sendAnalytics(_0x15d7("0x6b")),window[_0x15d7("0x86")][_0x15d7("0x66")](NativeActionType.SUGGESTION,x)))}function onSubmit(){lockSuggection=!0,done(NativeActionType.SUBMIT,_0x15d7("0x4c")),!0===competitionPractice&&hideConfirmModal(),lockSuggection=!1}function onSave(){lockSuggection=!0,done(NativeActionType[_0x15d7("0x63")],_0x15d7("0x63")),lockSuggection=!1}function done(x,e){sendAnalytics(e);var o=Blockly.Xml[_0x15d7("0x7f")](workspace),n=Blockly.Xml[_0x15d7("0x62")](o),t=btoa(workspaceToCode()),d=calculateScore();bridge.competition&&bridge[_0x15d7("0x78")][_0x15d7("0x1c")]&&d>bridge[_0x15d7("0x78")][_0x15d7("0x1c")]&&(d=bridge.competition[_0x15d7("0x1c")]),d<1&&(d=1),d=Math[_0x15d7("0x7c")](d),window.bridge[_0x15d7("0x66")](x,n,""[_0x15d7("0x20")](d),t)}function eventRunCode(){sendAnalytics(_0x15d7("0x3b")),!0===competitionPractice&&done(NativeActionType[_0x15d7("0x55")],"DONE")}function eventCodeBack(){sendAnalytics(_0x15d7("0x6d"))}function eventCodeClose(){sendAnalytics(_0x15d7("0xe"))}function sendAnalytics(x){var e=!0===competitionPractice?"COMPRACT_":_0x15d7("0x80");window[_0x15d7("0x86")][_0x15d7("0x66")](NativeActionType[_0x15d7("0x48")],e+x)}function showModal(){$(_0x15d7("0x5f"))[_0x15d7("0x56")]()}function hideModal(){$(_0x15d7("0x5f"))[_0x15d7("0x61")]()}function showPlaygroundView(){$(_0x15d7("0x24"))[_0x15d7("0x56")](),$(_0x15d7("0x9"))[_0x15d7("0x56")](),$(_0x15d7("0x4"))[_0x15d7("0x61")](),$(_0x15d7("0x74")).hide(),typeof onArenaUnmount!==_0x15d7("0x1")&&onArenaUnmount(),clearBlockHighlight()}function showArenaView(){$(_0x15d7("0x24")).hide(),$(_0x15d7("0x9"))[_0x15d7("0x61")](),$("#arena")[_0x15d7("0x56")](),$(_0x15d7("0x74"))[_0x15d7("0x56")](),renderArenaWorkspace(),typeof onArenaMount!==_0x15d7("0x1")&&onArenaMount(),clearBlockHighlight()}function highlightBlock(x){blocksExecutionQueue[_0x15d7("0x73")]()&&function o(x){workspaceReadOnly[_0x15d7("0x51")](x,!0);var e=setTimeout(function(){var x,e=blocksExecutionQueue[_0x15d7("0xb")]();e&&(workspaceReadOnly.highlightBlock(e,!1),(x=blocksExecutionQueue[_0x15d7("0x23")]())&&o(x))},500);animationTimeouts.push(e)}(x),blocksExecutionQueue[_0x15d7("0x1e")](x)}function clearBlockHighlight(){for(animationTimeouts.forEach(function(x){clearTimeout(x)});!blocksExecutionQueue[_0x15d7("0x73")]();)workspaceReadOnly[_0x15d7("0x51")](blocksExecutionQueue[_0x15d7("0xb")](),!1);blocksExecutionQueue[_0x15d7("0x6e")](),animationTimeouts=[]}function renderArenaWorkspace(){void 0===workspaceReadOnly?workspaceReadOnly=Blockly[_0x15d7("0x58")](_0x15d7("0x57"),{theme:workspace[_0x15d7("0x7")](),renderer:"geras",trashcan:!1,oneBasedIndex:!0,readOnly:!0,zoom:{controls:!1,wheel:!1,startScale:Blockly.previewScaleFactor,maxScale:Blockly.previewScaleFactor,minScale:Blockly[_0x15d7("0x47")],scaleSpeed:Blockly.previewScaleFactor},move:{scrollbars:!0,drag:!0,wheel:!0}}):workspaceReadOnly.clear();var x=Blockly[_0x15d7("0x69")][_0x15d7("0x7f")](workspace);Blockly[_0x15d7("0x69")][_0x15d7("0x19")](x,workspaceReadOnly)}function ifInsideBlock(x,e){if(typeof x!==_0x15d7("0x0"))return!1;if(_typeof(e)!==_0x15d7("0x5e"))return!1;for(var o,n=e,t=!0;t;){n&&(o=n[_0x15d7("0x85")]())?n=o:t=!1}return!(!n||n[_0x15d7("0x84")]!==x)}function closePlaygroundWindow(){sendAnalytics(_0x15d7("0xc")),$(_0x15d7("0x68"))[_0x15d7("0x61")](),$(_0x15d7("0x72"))[_0x15d7("0x61")](),$(_0x15d7("0x2d"))[_0x15d7("0x56")]()}function openPlaygroundWindow(){sendAnalytics(_0x15d7("0x28")),$(_0x15d7("0x68")).show(),$(_0x15d7("0x72"))[_0x15d7("0x56")](),$(_0x15d7("0x2d"))[_0x15d7("0x61")]()}function openTimeoutModal(){sendAnalytics(_0x15d7("0x83")),$(_0x15d7("0x21"))[_0x15d7("0x56")]()}function hideTimeoutModal(){sendAnalytics(_0x15d7("0x14")),$("#timeoutModal").hide()}function openConfirmModal(){sendAnalytics(_0x15d7("0x2f")),$(_0x15d7("0xa"))[_0x15d7("0x56")]()}function hideConfirmModal(){sendAnalytics(_0x15d7("0x5d")),$(_0x15d7("0xa")).hide()}function changePracticeMode(x){!0===(competitionPractice=x)?($(_0x15d7("0x8"))[_0x15d7("0x61")](),$(_0x15d7("0x77"))[_0x15d7("0x61")](),$(_0x15d7("0x37"))[_0x15d7("0x56")]()):($("#countdownUi")[_0x15d7("0x56")](),$(_0x15d7("0x77")).show(),$(_0x15d7("0x37"))[_0x15d7("0x61")]())}function calculateScoreBySequence(x){var e,o=1,n=_createForOfIteratorHelper(x);try{for(n.s();!(e=n.n())[_0x15d7("0x2")];){var t=function(x){var e=0,o=bridge[_0x15d7("0x78")]&&bridge[_0x15d7("0x78")][_0x15d7("0x1c")]?bridge[_0x15d7("0x78")].totalScore:100,n=o/x[_0x15d7("0x18")],t=workspace.getAllBlocks();for(var d in x)t[d]&&t[d].type===x[d]&&(e+=n);return t[_0x15d7("0x18")]>x[_0x15d7("0x18")]&&(e-=n*(t[_0x15d7("0x18")]-x.length)),e<0&&(e=0),(e=Math[_0x15d7("0x7c")](e))>o&&(e=o),e}(e.value);o<t&&(o=t)}}catch(x){n.e(x)}finally{n.f()}return o}function calculateScoreByCount(x){var o=0,e=bridge[_0x15d7("0x78")]&&bridge[_0x15d7("0x78")][_0x15d7("0x1c")]?bridge[_0x15d7("0x78")][_0x15d7("0x1c")]:100,n=0;if(x.forEach(function(x){n+=x.count}),0===n)return e;var t=e/n,d=workspace[_0x15d7("0x4f")]()[_0x15d7("0x5b")](function(x){return!1!==x[_0x15d7("0x60")]()});return x[_0x15d7("0x76")](function(e){var x=d.filter(function(x){return x[_0x15d7("0x84")]===e[_0x15d7("0x84")]});x.length>=e[_0x15d7("0x75")]?o+=t*e.count:o+=t*x[_0x15d7("0x18")]}),d.length>n&&(o-=t*(d[_0x15d7("0x18")]-n)),o<1&&(o=1),(o=Math[_0x15d7("0x7c")](o))>e&&(o=e),o}function getCompetitionMaxScore(){return!0===competitionPractice?bridge.competition&&bridge.competition.practice&&bridge[_0x15d7("0x78")][_0x15d7("0x65")][_0x15d7("0x1a")]?bridge.competition[_0x15d7("0x65")][_0x15d7("0x1a")]:20:bridge.competition&&bridge[_0x15d7("0x78")].totalScore?bridge[_0x15d7("0x78")].totalScore:100}function getSuggestionPriorityMessage(x,e){return x||e||null}function hasBlockSelectionValue(e,x){var o=workspace[_0x15d7("0x4f")]()[_0x15d7("0x5b")](function(x){return!1!==x[_0x15d7("0x60")]()})[_0x15d7("0x5b")](function(x){return x[_0x15d7("0x84")]===e});if(0===o.length)return!1;var n,t=_createForOfIteratorHelper(o);try{for(t.s();!(n=t.n())[_0x15d7("0x2")];){var d=n[_0x15d7("0x3c")];if(_typeof(d[_0x15d7("0x88")])===_0x15d7("0x5e")&&Array.isArray(d.inputList)){var r,c=_createForOfIteratorHelper(d[_0x15d7("0x88")]);try{for(c.s();!(r=c.n())[_0x15d7("0x2")];){var i=r.value;if(_typeof(i[_0x15d7("0x7d")])===_0x15d7("0x5e")&&Array[_0x15d7("0x11")](i[_0x15d7("0x7d")])){var a,_=_createForOfIteratorHelper(i.fieldRow);try{for(_.s();!(a=_.n())[_0x15d7("0x2")];){var l=a.value;if(typeof l.getValue===_0x15d7("0x54")&&l[_0x15d7("0x3d")]()===x)return!0}}catch(e){_.e(e)}finally{_.f()}}}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){t.e(e)}finally{t.f()}return!1}function isBlockUsed(e){var x=workspace[_0x15d7("0x4f")]()[_0x15d7("0x5b")](function(x){return!1!==x[_0x15d7("0x60")]()})[_0x15d7("0x33")](function(x){return x[_0x15d7("0x84")]===e});return null!=x}function isBlockUsedInParent(e,x){var o=workspace[_0x15d7("0x4f")]()[_0x15d7("0x5b")](function(x){return!1!==x[_0x15d7("0x60")]()})[_0x15d7("0x33")](function(x){return x[_0x15d7("0x84")]===e});return!(!o||!o[_0x15d7("0x85")]()||o[_0x15d7("0x85")]().type!==x)}function isBlockInsideGrandBlock(e,x){var o=workspace[_0x15d7("0x4f")]()[_0x15d7("0x5b")](function(x){return!1!==x[_0x15d7("0x60")]()})[_0x15d7("0x33")](function(x){return x[_0x15d7("0x84")]===e});if(o)for(var n=o.getParent();n;){if(n[_0x15d7("0x84")]===x)return!0;n=n.getParent()}return!1}blocks&&blocks[_0x15d7("0x2a")]&&Blockly[_0x15d7("0x69")][_0x15d7("0x50")](blocks,workspace),$("document")[_0x15d7("0x36")](function(){$(_0x15d7("0x5a"))[_0x15d7("0x61")](),showPlaygroundView()});